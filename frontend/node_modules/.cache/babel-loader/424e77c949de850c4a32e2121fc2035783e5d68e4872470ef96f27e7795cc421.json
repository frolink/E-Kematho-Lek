{"ast":null,"code":"import React,{useState,useEffect}from'react';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const API_BASE='https://e-kematho-backend.vercel.app';function App(){const[status,setStatus]=useState('Memeriksa SDK...');const[user,setUser]=useState(null);useEffect(()=>{if(window.Pi&&typeof window.Pi.init==='function'){try{window.Pi.init({version:'2.0',sandbox:true});console.log('‚úÖ Pi SDK ready (sandbox).');setStatus('‚úÖ SDK Pi terdeteksi.');}catch(e){console.error('Pi.init error',e);setStatus('‚ùå Gagal inisialisasi Pi SDK.');}}else{setStatus('‚ö†Ô∏è Pi SDK tidak ditemukan (gunakan Pi Browser atau sandbox).');}},[]);const login=async()=>{if(!window.Pi||!window.Pi.authenticate){alert('Pi SDK tidak tersedia. Buka halaman ini di Pi Browser atau gunakan sandbox.');return;}setStatus('üîÑ Memulai autentikasi...');try{const scopes=['username','payments'];const auth=await window.Pi.authenticate(scopes);console.log('auth result',auth);// Kirim accessToken ke backend untuk verifikasi\nconst res=await fetch(\"\".concat(API_BASE,\"/verify\"),{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({accessToken:auth.accessToken})});const data=await res.json();if(!res.ok)throw new Error(data.error||'Verifikasi gagal');setUser(data.user);setStatus('‚úÖ Login & verifikasi sukses.');}catch(err){console.error(err);setStatus('‚ùå Login/Verifikasi gagal: '+(err.message||err));}};return/*#__PURE__*/_jsxs(\"div\",{style:{fontFamily:'sans-serif',padding:20},children:[/*#__PURE__*/_jsx(\"h1\",{children:\"\\uD83D\\uDC9C E-Kematho-Pay (Demo)\"}),/*#__PURE__*/_jsx(\"p\",{children:status}),!user?/*#__PURE__*/_jsx(\"button\",{onClick:login,children:\"Login dengan Pi Network\"}):/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h3\",{children:[\"Halo, \",user.username]}),/*#__PURE__*/_jsx(\"pre\",{style:{background:'#f4f4f4',padding:10},children:JSON.stringify(user,null,2)})]}),/*#__PURE__*/_jsxs(\"p\",{style:{marginTop:20},children:[\"Backend: \",API_BASE]})]});}export default App;","map":{"version":3,"names":["React","useState","useEffect","jsx","_jsx","jsxs","_jsxs","API_BASE","App","status","setStatus","user","setUser","window","Pi","init","version","sandbox","console","log","e","error","login","authenticate","alert","scopes","auth","res","fetch","concat","method","headers","body","JSON","stringify","accessToken","data","json","ok","Error","err","message","style","fontFamily","padding","children","onClick","username","background","marginTop"],"sources":["/data/data/com.termux/files/home/e-kematho-lek/frontend/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\n\nconst API_BASE = 'https://e-kematho-backend.vercel.app';\n\nfunction App() {\n  const [status, setStatus] = useState('Memeriksa SDK...');\n  const [user, setUser] = useState(null);\n\n  useEffect(() => {\n    if (window.Pi && typeof window.Pi.init === 'function') {\n      try {\n        window.Pi.init({ version: '2.0', sandbox: true });\n        console.log('‚úÖ Pi SDK ready (sandbox).');\n        setStatus('‚úÖ SDK Pi terdeteksi.');\n      } catch (e) {\n        console.error('Pi.init error', e);\n        setStatus('‚ùå Gagal inisialisasi Pi SDK.');\n      }\n    } else {\n      setStatus('‚ö†Ô∏è Pi SDK tidak ditemukan (gunakan Pi Browser atau sandbox).');\n    }\n  }, []);\n\n  const login = async () => {\n    if (!window.Pi || !window.Pi.authenticate) {\n      alert('Pi SDK tidak tersedia. Buka halaman ini di Pi Browser atau gunakan sandbox.');\n      return;\n    }\n\n    setStatus('üîÑ Memulai autentikasi...');\n    try {\n      const scopes = ['username', 'payments'];\n      const auth = await window.Pi.authenticate(scopes);\n      console.log('auth result', auth);\n\n      // Kirim accessToken ke backend untuk verifikasi\n      const res = await fetch(`${API_BASE}/verify`, {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ accessToken: auth.accessToken })\n      });\n\n      const data = await res.json();\n      if (!res.ok) throw new Error(data.error || 'Verifikasi gagal');\n\n      setUser(data.user);\n      setStatus('‚úÖ Login & verifikasi sukses.');\n    } catch (err) {\n      console.error(err);\n      setStatus('‚ùå Login/Verifikasi gagal: ' + (err.message || err));\n    }\n  };\n\n  return (\n    <div style={{ fontFamily: 'sans-serif', padding: 20 }}>\n      <h1>üíú E-Kematho-Pay (Demo)</h1>\n      <p>{status}</p>\n\n      {!user ? (\n        <button onClick={login}>Login dengan Pi Network</button>\n      ) : (\n        <div>\n          <h3>Halo, {user.username}</h3>\n          <pre style={{ background: '#f4f4f4', padding: 10 }}>\n            {JSON.stringify(user, null, 2)}\n          </pre>\n        </div>\n      )}\n\n      <p style={{ marginTop: 20 }}>Backend: {API_BASE}</p>\n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}